(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{134:function(e,t,a){e.exports=a(158)},139:function(e,t,a){},158:function(e,t,a){"use strict";a.r(t);var n,r,c,i,l,o=a(0),s=a.n(o),u=a(15),m=a.n(u),d=(a(139),a(10)),p=a.n(d),f=a(17),E=a(7),b=a(21),g=a(33),v=a(114),h=a(217),O=a(190),y=a(60),j=a(219),C=a(193),x=a(100),S=a(23),k=a(20),w=a.n(k),N=a(117),I=function(e){var t=e.children,a=A();return s.a.createElement(N.a,{className:a.padding},t)},A=Object(x.a)((function(e){return{padding:{padding:e.spacing(5)}}})),L=function(){var e=Object(o.useState)(""),t=Object(E.a)(e,2),a=t[0],n=t[1],r=Object(o.useState)(""),c=Object(E.a)(r,2),i=c[0],l=c[1],u=Object(o.useState)(""),m=Object(E.a)(u,2),d=m[0],b=m[1],g=R(),v=function(){var e=Object(f.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),b(""),e.prev=2,e.next=5,w.a.auth().signInWithEmailAndPassword(a,i);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),b(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}();return s.a.createElement(I,null,s.a.createElement("form",{onSubmit:function(e){return v(e)}},s.a.createElement(O.a,{container:!0,direction:"column",alignItems:"stretch",spacing:4},s.a.createElement(O.a,{item:!0,className:g.title},s.a.createElement(y.a,{variant:"h5"},"Login")),s.a.createElement(O.a,{item:!0},s.a.createElement(j.a,{type:"email",error:!!d,fullWidth:!0,value:a,onChange:function(e){return n(e.target.value)},label:"email",variant:"outlined"})),s.a.createElement(O.a,{item:!0},s.a.createElement(j.a,{fullWidth:!0,error:!!d,type:"password",label:"password",value:i,onChange:function(e){return l(e.target.value)},variant:"outlined"})),s.a.createElement(O.a,{item:!0},s.a.createElement(C.a,{type:"submit",disabled:!a||!i,fullWidth:!0,variant:"contained",color:"primary"},"Submit")),s.a.createElement(O.a,{item:!0,container:!0,alignItems:"center",spacing:1},s.a.createElement(O.a,{item:!0},s.a.createElement(y.a,null,"Dont have an account?")),s.a.createElement(O.a,{item:!0},s.a.createElement(S.a,{to:"/create-account"},"Create account"))),d&&s.a.createElement(O.a,{item:!0},s.a.createElement(y.a,{color:"error"},d)))))},R=Object(x.a)((function(){return{title:{alignSelf:"center"},logo:{height:150}}})),D=Object(o.createContext)(null),T=a(14),W=a(101),F=a.n(W),z=a(194),P=a(195),q=a(196),B=a(197),U=a(198);!function(e){e.lienSearch="Lien Search",e.estoppelLetter="Estoppel Letter",e.landSurvey="Land Survey",e.permitResolution="Permit Resolution"}(n||(n={})),function(e){e.newOrder="New Order",e.hold="Hold",e.informationRequested="Information Requested",e.informationReceived="Information Received",e.pendingPayment="Pending Payment",e.cancelled="Cancelled",e.finalized="Finalized"}(r||(r={})),function(e){e.address1="Address 1",e.address2="Address 2",e.unit="Unit",e.city="City",e.state="State",e.zipCode="Zip Code"}(c||(c={})),function(e){e.orderNumber="Order # / File Name",e.folio="Folio",e.legalDescription="Legal Description",e.seller="Seller",e.buyer="Buyer",e.listingAgent="Listing Agent",e.listingAgentPhone="Listing Agent Phone",e.specialInstructions="Special Instructions"}(i||(i={})),function(e){e.lenderCertification="Lender Certification",e.buyerCertification="Buyer Certification",e.underwriterCertification="Underwriter Certification",e.titleCompany="Title Company",e.hardCopy="Request Hard Copy"}(l||(l={}));var M=["Order # / File Name","Address","Folio","Status","Created"],H=function(e){var t=e.orders;return s.a.createElement(N.a,null,s.a.createElement(z.a,null,s.a.createElement(P.a,null,s.a.createElement(q.a,null,M.map((function(e,t){return s.a.createElement(B.a,{key:"header".concat(t)},e)})))),s.a.createElement(U.a,null,t.map((function(e,t){return s.a.createElement(V,Object.assign({key:"order-".concat(t)},{order:e}))})))))},V=function(e){var t=e.order,a=Object(b.g)(),n=G();return s.a.createElement(q.a,{onClick:function(){return e=t.objectID,void a.push("/order/".concat(e));var e},hover:!0,className:n.pointer},s.a.createElement(B.a,null,t.orderNumber||"--"),s.a.createElement(B.a,null,t.address.address1||"--"),s.a.createElement(B.a,null,t.folio||"--"),s.a.createElement(B.a,null,r[t.status]||"--"),s.a.createElement(B.a,null,new Date(t.created_on).toLocaleString()||"--"))},G=Object(x.a)((function(){return{container:{width:"80vw"},pointer:{cursor:"pointer"}}})),K=a(83),Y=a.n(K),_=function(e){var t=e.value,a=e.setValue;return s.a.createElement(O.a,{item:!0,container:!0,spacing:1,alignItems:"flex-end"},s.a.createElement(O.a,{item:!0},s.a.createElement(Y.a,{color:"disabled"})),s.a.createElement(O.a,{item:!0,xs:9},s.a.createElement(j.a,Object.assign({InputProps:{disableUnderline:!0},fullWidth:!0},{value:t},{onChange:function(e){return a(e.target.value)},placeholder:"Search by address, zip code, status, or folio..."}))))},X=a(225),$=function(e){var t=e.status,a=e.setStatus,n=e.withLabel;return s.a.createElement(j.a,{label:n?"Status":void 0,select:!0,value:t,variant:"outlined",fullWidth:!0,size:"small",onChange:function(e){return a(e.target.value)}},s.a.createElement(X.a,{value:""},"All"),Object.keys(r).map((function(e,t){return s.a.createElement(X.a,{key:"".concat(t,"-").concat(e),value:e},r[e])})))},J=function(e){var t=e.orgId,a=e.setOrgId,n=Object(o.useState)([]),r=Object(E.a)(n,2),c=r[0],i=r[1],l=Object(o.useContext)(D),u=w.a.firestore();return Object(o.useEffect)((function(){(null===l||void 0===l?void 0:l.admin)&&u.collection("organizations").get().then((function(e){var t=[];e.forEach((function(e){t.push(Object(T.a)({id:e.id},e.data()))})),i(t)})).catch((function(e){return console.log(e)}))}),[l,u]),s.a.createElement(O.a,{item:!0},s.a.createElement(j.a,{label:"Organization",select:!0,variant:"outlined",fullWidth:!0,value:t,size:"small",onChange:function(e){return a(e.target.value)}},s.a.createElement(X.a,{value:""},"All"),c.map((function(e,t){return s.a.createElement(X.a,{key:"status-".concat(t),value:e.id},e.name)}))))},Z=function(e){var t=e.orderType,a=e.setOrderType;return s.a.createElement(j.a,{label:"Order Type",select:!0,value:t,variant:"outlined",fullWidth:!0,size:"small",onChange:function(e){return a(e.target.value)}},s.a.createElement(X.a,{value:""},"All"),Object.keys(n).map((function(e,t){return s.a.createElement(X.a,{key:"".concat(t,"-").concat(e),value:e},n[e])})))},Q=a(27),ee=function(e){var t=e.filters,a=t.status,n=t.organizations,r=t.orderType;return s.a.createElement(O.a,{item:!0,container:!0,spacing:3,alignItems:"center"},a&&s.a.createElement(O.a,{item:!0,xs:12,sm:3,md:2},s.a.createElement($,{status:a.value,setStatus:a.setter,withLabel:!0})),n&&s.a.createElement(O.a,{item:!0,xs:12,sm:3,md:2},s.a.createElement(J,{orgId:n.value,setOrgId:n.setter})),r&&s.a.createElement(O.a,{item:!0,xs:12,sm:3,md:2},s.a.createElement(Z,{orderType:r.value,setOrderType:r.setter})),s.a.createElement(O.a,{item:!0,xs:12,sm:3,md:2},s.a.createElement(C.a,{size:"small",variant:"contained",color:"primary",onClick:function(){Object(Q.forOwn)(t,(function(e){return e&&e.setter("")}))}},"Clear Filters")))},te=function(e){var t=e.imageFile,a=e.title,n=e.description,r=e.button,c=e.width,i=ae();return s.a.createElement(O.a,{item:!0,container:!0,direction:"column",justify:"center",alignItems:"center",spacing:3},s.a.createElement(O.a,{item:!0},s.a.createElement("img",{style:c?{maxWidth:c}:void 0,className:i.image,src:"".concat("","/Illustrations/").concat(t),alt:""})),s.a.createElement(O.a,{item:!0},s.a.createElement(y.a,{variant:"h6"},a)),n&&s.a.createElement(O.a,{item:!0,xs:8},s.a.createElement(y.a,{align:"center",variant:"body2"},n)),r&&s.a.createElement(O.a,{item:!0},s.a.createElement(C.a,{"data-test":"button_emptyCreate",disabled:r.disabled,color:"primary",size:"large",variant:"contained",onClick:r.onClick},r.text)))},ae=Object(x.a)((function(e){return{image:{maxWidth:"350px",fill:e.palette.primary.main}}})),ne=F()("1AVZX9L93I","68be777ac13a6002caf326d9bcfbf90a"),re=new Map([["organizations",function(e){return"orgId:".concat(e)}],["orderType",function(e){return"orderType.".concat(e,":true")}],["status",function(e){return"status:".concat(e)}]]),ce=function(e,t){return Object(Q.transform)(Object(T.a)({},e),(function(e,t,a){return(null===t||void 0===t?void 0:t.value)?e.push(re.get(a)(t.value)):e}),t||[])},ie=function(){var e=Object(o.useState)([]),t=Object(E.a)(e,2),a=t[0],n=t[1],r=Object(o.useState)(""),c=Object(E.a)(r,2),i=c[0],l=c[1],u=Object(o.useState)(""),m=Object(E.a)(u,2),d=m[0],b=m[1],g=Object(o.useState)(""),v=Object(E.a)(g,2),h=v[0],y=v[1],j=Object(o.useState)(""),C=Object(E.a)(j,2),x=C[0],S=C[1],k=Object(o.useContext)(D),w=Object(o.useMemo)((function(){var e={status:{value:d,setter:b},orderType:{value:x,setter:S}};return(null===k||void 0===k?void 0:k.admin)&&(e.organizations={value:h,setter:y}),e}),[k,d,x,h]),N=Object(o.useCallback)(Object(f.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne.initIndex("orders");case 2:t=e.sent,a=[],k&&!(null===k||void 0===k?void 0:k.admin)&&(a=["orgId:".concat(k.orgId)]),a=ce(w,a),t.search(i,{facetFilters:a}).then((function(e){var t=e.hits;n(t)}));case 7:case"end":return e.stop()}}),e)}))),[k,i,w]);return Object(o.useEffect)((function(){N()}),[N]),s.a.createElement(O.a,{container:!0,direction:"column",spacing:4},s.a.createElement(O.a,{item:!0,container:!0,direction:"column",spacing:2},s.a.createElement(O.a,{item:!0,container:!0},s.a.createElement(ee,{filters:w})),s.a.createElement(O.a,{item:!0},s.a.createElement(_,{value:i,setValue:l}))),s.a.createElement(O.a,{item:!0},0===a.length?s.a.createElement(te,{title:"No Orders Found",imageFile:"orders.svg"}):s.a.createElement(H,{orders:a})))},le=function(){var e=Object(b.g)(),t=Object(o.useContext)(D),a=oe(),n=null===t||void 0===t?void 0:t.admin;return s.a.createElement(O.a,{item:!0,container:!0,direction:"column",spacing:5,className:a.container},s.a.createElement(O.a,{item:!0,container:!0,wrap:"nowrap",justify:"space-between",alignItems:"center"},s.a.createElement(O.a,{item:!0},s.a.createElement(y.a,{variant:"h5"},"Orders")),!n&&s.a.createElement(O.a,{item:!0},s.a.createElement(C.a,{variant:"contained",color:"primary",size:"large",onClick:function(){return e.push("/new-order/1")}},"New Order"))),s.a.createElement(O.a,{item:!0,container:!0,spacing:3,direction:"column"},s.a.createElement(O.a,{item:!0},s.a.createElement(ie,null))))},oe=Object(x.a)((function(){return{container:{width:"80vw"},pointer:{cursor:"pointer"}}})),se=a(116),ue=a(102),me=a.n(ue),de=function(){var e=pe(),t=Object(o.useState)(""),a=Object(E.a)(t,2),n=a[0],r=a[1],c=Object(se.a)(),i=c.register,l=c.handleSubmit,u=Object(b.g)(),m=function(){var e=Object(f.a)(p.a.mark((function e(t,a){var n,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a&&a.preventDefault(),r(""),n=new me.a(t.phoneNumber,"US"),console.log(n.getNumber()),e.prev=4,n.isValid()){e.next=7;break}throw new Error("Please input valid phone number");case 7:return c=w.a.functions().httpsCallable("createUser"),e.next=10,c({email:t.email,password:t.password,name:t.name,orgId:t.orgId,phoneNumber:n.getNumber()});case 10:u.push("/"),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(4),r(e.t0.message);case 16:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(t,a){return e.apply(this,arguments)}}();return s.a.createElement(I,null,s.a.createElement("form",{onSubmit:l(m)},s.a.createElement(O.a,{container:!0,direction:"column",alignItems:"stretch",spacing:4},s.a.createElement(O.a,{item:!0,className:e.title},s.a.createElement(y.a,{variant:"h5"},"Create Account")),s.a.createElement(O.a,{item:!0},s.a.createElement(j.a,{type:"email",error:!!n,fullWidth:!0,label:"Email",variant:"outlined",name:"email",inputRef:i})),s.a.createElement(O.a,{item:!0},s.a.createElement(j.a,{type:"name",error:!!n,fullWidth:!0,label:"Name",variant:"outlined",name:"name",inputRef:i})),s.a.createElement(O.a,{item:!0},s.a.createElement(j.a,{type:"phone",error:!!n,fullWidth:!0,label:"Phone Number",variant:"outlined",name:"phoneNumber",inputRef:i})),s.a.createElement(O.a,{item:!0},s.a.createElement(j.a,{type:"id",error:!!n,fullWidth:!0,label:"Organization Id",variant:"outlined",name:"orgId",inputRef:i})),s.a.createElement(O.a,{item:!0},s.a.createElement(j.a,{fullWidth:!0,error:!!n,type:"password",label:"Password",variant:"outlined",name:"password",inputRef:i})),s.a.createElement(O.a,{item:!0},s.a.createElement(j.a,{fullWidth:!0,error:!!n,type:"password",label:"Confirm Password",variant:"outlined",name:"confirmedPassword",inputRef:i})),s.a.createElement(O.a,{item:!0},s.a.createElement(C.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary"},"Submit")),s.a.createElement(O.a,{item:!0,container:!0,alignItems:"center",spacing:1},s.a.createElement(O.a,{item:!0},s.a.createElement(y.a,null,"Already have an account?")),s.a.createElement(O.a,{item:!0},s.a.createElement(S.a,{to:"/"},"Login"))),n&&s.a.createElement(O.a,{item:!0},s.a.createElement(y.a,{color:"error"},n)))))},pe=Object(x.a)((function(){return{title:{alignSelf:"center"}}})),fe=a(222),Ee=a(200),be=a(201),ge=a(202),ve=a(46),he=a.n(ve),Oe=a(224),ye=a(199),je=a(221),Ce=function(e){var t=e.activeStep,a=e.steps;return s.a.createElement(Oe.a,{activeStep:t},a.map((function(e){return s.a.createElement(ye.a,{key:e.label},s.a.createElement(je.a,null,e.label))})))},xe=function(e){var t,a,n=e.activeStep,r=e.toolbarHeader,c=e.cancelPath,i=e.stepComponents,l=Object(b.g)(),o=Se(),u=parseInt(n)-1,m=function(){return l.push(c)};return s.a.createElement(fe.a,{fullScreen:!0,open:!0,onClose:m},s.a.createElement(Ee.a,{className:o.appBar},s.a.createElement(be.a,null,s.a.createElement(O.a,{container:!0,spacing:2,alignItems:"center"},s.a.createElement(O.a,{item:!0},s.a.createElement(ge.a,{edge:"start",color:"inherit",onClick:m,"aria-label":"close"},s.a.createElement(he.a,null))),s.a.createElement(O.a,{item:!0},s.a.createElement(y.a,{variant:"h5"},r))))),s.a.createElement(O.a,{container:!0,direction:"column"},s.a.createElement(O.a,{container:!0,item:!0,justify:"center"},s.a.createElement(Ce,{activeStep:u,steps:i})),s.a.createElement(O.a,{item:!0,container:!0,justify:"center"},null!==(t=null===(a=i[u])||void 0===a?void 0:a.component)&&void 0!==t?t:"Error")))},Se=Object(x.a)((function(e){return{appBar:{position:"relative"},paper:{padding:e.spacing(4,5,2,5)},buttons:{marginBottom:e.spacing(2)}}})),ke=function(e){var t=e.content,a=e.isLast,n=e.isFirst,r=e.onNext,c=e.onCancel,i=e.disabled,l=void 0!==i&&i,o=we(),u=Object(b.g)();return s.a.createElement(O.a,{item:!0,container:!0,direction:"column",spacing:3,className:o.container},t,s.a.createElement(O.a,{item:!0,container:!0,spacing:2,justify:"flex-end",className:o.buttons},s.a.createElement(O.a,{item:!0},s.a.createElement(C.a,{onClick:c||function(){return u.goBack()},variant:"contained",color:"primary"},n?"Cancel":"Back")),s.a.createElement(O.a,{item:!0},s.a.createElement(C.a,{onClick:r,disabled:l,variant:"contained",color:"primary"},a?"Finish":"Next"))))},we=Object(x.a)((function(e){return{container:{margin:e.spacing(0,5)},buttons:{marginBottom:e.spacing(2)}}})),Ne=a(203),Ie=a(72),Ae=a.n(Ie),Le=a(47),Re=a.n(Le),De=new Map([["lienSearch","Lien Search"],["estoppelLetter","Estoppel Letter"],["landSurvey","Land Survey"],["permitResolution","Permit Resolution"]]),Te=new Map([["folio","Folio"],["legalDescription","legal Description"],["closingDate","Closing Date"],["neededDate","Needed Date"],["seller","Seller"],["buyer","Buyer"],["listingAgent","Listing Agent"],["listingAgentPhone","Listing Agent Phone"],["specialInstructions","Special Instructions"]]),We=new Map([["buyerCertification","Buyer Certification"],["lenderCertification","Lender Certification"],["titleCompany","Title Company"],["underwriterCertification","Underwriter Certficiation"]]),Fe=["folio","closingDate","neededDate","buyer","listingAgent","listingAgentPhone","legalDescription","specialInstructions"],ze=["buyerCertification","lenderCertification","titleCompany","underwriterCertification"],Pe=function(e){var t=e.order,a=e.type,n=Object(o.useContext)(D),r=Re.a.firestore(),c=Object(b.g)(),i=Object(o.useState)(null),l=Object(E.a)(i,2),u=l[0],m=l[1],d=Object(o.useState)(null),p=Object(E.a)(d,2),f=p[0],g=p[1],v=Object(o.useState)(!1),h=Object(E.a)(v,2),j=h[0],x=h[1];Object(o.useEffect)((function(){t.orgId?r.collection("organizations").doc(t.orgId).get().then((function(e){e.exists||m(null),m(e.data())})).catch((function(e){return console.log(e)})).finally((function(){return x(!1)})):(m(null),x(!1))}),[t,r]),Object(o.useEffect)((function(){var e;"info"===a&&t.requestedBy?r.collection("users").doc(t.requestedBy).get().then((function(e){var t,a;e.exists||g(null),g(null!==(t=null===(a=e.data())||void 0===a?void 0:a.email)&&void 0!==t?t:"")})).catch((function(e){return console.log("here",e)})).finally((function(){return x(!1)})):g(null!==(e=null===n||void 0===n?void 0:n.email)&&void 0!==e?e:"")}),[t,a,r,n]);var S=s.a.createElement(s.a.Fragment,null,s.a.createElement(O.a,{item:!0,container:!0,alignItems:"center",justify:"space-between"},s.a.createElement(O.a,{item:!0},s.a.createElement(y.a,{variant:"body1"},"Requested By")),s.a.createElement(O.a,{item:!0},s.a.createElement(y.a,{variant:"body2"},null!==f&&void 0!==f?f:"No User Found"))),s.a.createElement(O.a,{item:!0,container:!0,alignItems:"center",justify:"space-between"},s.a.createElement(O.a,{item:!0},s.a.createElement(y.a,{variant:"body1"},"Company")),s.a.createElement(O.a,{item:!0},s.a.createElement(y.a,{variant:"body2"},u?u.name:"No Company Found"))));return j?s.a.createElement(s.a.Fragment,null):(console.log(t),s.a.createElement(s.a.Fragment,null,s.a.createElement(O.a,{item:!0},s.a.createElement(y.a,{variant:"h5"},"Review Order"),s.a.createElement(Ne.a,null)),s.a.createElement(O.a,{item:!0,container:!0,spacing:3},"info"===a&&s.a.createElement(O.a,{item:!0,container:!0,direction:"column",spacing:1,xs:4},s.a.createElement(O.a,{item:!0},s.a.createElement(y.a,{variant:"h6"},"Order Owner"),s.a.createElement(Ne.a,null)),S),s.a.createElement(O.a,{item:!0,container:!0,xs:"info"===a?4:3,spacing:1,direction:"column"},s.a.createElement(O.a,{item:!0},s.a.createElement(y.a,{variant:"h6"},"Property Address"),s.a.createElement(Ne.a,null)),s.a.createElement(O.a,{item:!0,container:!0,direction:"column",spacing:1},s.a.createElement(O.a,{item:!0},s.a.createElement(y.a,null,null===t||void 0===t?void 0:t.address.address1)),(null===t||void 0===t?void 0:t.address.address2)&&s.a.createElement(O.a,{item:!0},s.a.createElement(y.a,null,t.address.address2)),(null===t||void 0===t?void 0:t.address.unit)&&s.a.createElement(O.a,{item:!0},s.a.createElement(y.a,null,t.address.unit)),s.a.createElement(O.a,{item:!0},s.a.createElement(y.a,null,"".concat(null===t||void 0===t?void 0:t.address.city,", ").concat(null===t||void 0===t?void 0:t.address.state," ").concat(null===t||void 0===t?void 0:t.address.zipCode))))),s.a.createElement(O.a,{item:!0,container:!0,direction:"column",xs:"info"===a?4:3,spacing:1},s.a.createElement(O.a,{item:!0},s.a.createElement(y.a,{variant:"h6"},"Order Type"),s.a.createElement(Ne.a,null)),function(){for(var e=[],a=0,n=Object.entries(t.orderType);a<n.length;a++){var r=Object(E.a)(n[a],2),c=r[0],i=r[1],l=s.a.createElement(O.a,{item:!0,container:!0,alignItems:"center",justify:"space-between",key:c},s.a.createElement(O.a,{item:!0},s.a.createElement(y.a,{variant:"body1"},De.get(c))),s.a.createElement(O.a,{item:!0},i?s.a.createElement(Ae.a,null):s.a.createElement(he.a,null)));e.push(l)}return e}()),t.landSurvey&&s.a.createElement(O.a,{item:!0,container:!0,xs:"info"===a?12:6,direction:"column",spacing:1},s.a.createElement(O.a,{item:!0},s.a.createElement(y.a,{variant:"h6"},"Land Survey Info"),s.a.createElement(Ne.a,null)),s.a.createElement(s.a.Fragment,null,ze.map((function(e){return s.a.createElement(O.a,{item:!0,container:!0,alignItems:"center",justify:"space-between",key:e},s.a.createElement(O.a,{item:!0,xs:4},s.a.createElement(y.a,{variant:"body1"},We.get(e))),s.a.createElement(O.a,{item:!0,xs:8},s.a.createElement(y.a,{variant:"body2"},t.landSurvey[e]||"--")))})),s.a.createElement(O.a,{item:!0,container:!0,alignItems:"center",justify:"space-between"},s.a.createElement(O.a,{item:!0,xs:4},s.a.createElement(y.a,{variant:"body1"},"Include Hard Copy")),s.a.createElement(O.a,{item:!0,xs:8},t.landSurvey.hardCopy?s.a.createElement(Ae.a,null):s.a.createElement(he.a,null))))),s.a.createElement(O.a,{item:!0,container:!0,xs:"info"===a?12:6,direction:"column",spacing:1},s.a.createElement(O.a,{item:!0},s.a.createElement(y.a,{variant:"h6"},"Order Details"),s.a.createElement(Ne.a,null)),Fe.map((function(e){return s.a.createElement(O.a,{item:!0,container:!0,alignItems:"center",justify:"space-between",key:e},s.a.createElement(O.a,{item:!0,xs:4},s.a.createElement(y.a,{variant:"body1"},Te.get(e))),s.a.createElement(O.a,{item:!0,xs:8},s.a.createElement(y.a,{variant:"body2"},t[e]||"--")))}))),"info"===a&&"cancelled"!==t.status&&"finalized"!==t.status&&s.a.createElement(O.a,{item:!0},s.a.createElement(C.a,{variant:"contained",color:"primary",onClick:function(){return c.push("/update/".concat(t.id,"/1"))}},"Update Order")))))},qe=function(e){var t=e.data,a=e.associations,n=e.orderType,r=e.address,c=e.landSurvey,i=e.id,l=Object(o.useState)(!1),u=Object(E.a)(l,2),m=u[0],d=u[1],g=Object(o.useContext)(D),v=Object(b.g)(),h=w.a.firestore(),O=Object(T.a)(Object(T.a)({},t),{},{address:r,landSurvey:c,associations:a,orderType:n,requestedBy:(null===g||void 0===g?void 0:g.uid)||"",orgId:(null===g||void 0===g?void 0:g.orgId)||"",created_on:Date.now(),status:"newOrder",assignee:""});console.log(O);var y=function(){var e=Object(f.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d(!0),e.prev=1,!i){e.next=8;break}return e.next=5,h.collection("orders").doc(i).update(O);case 5:v.push("/order/".concat(i)),e.next=11;break;case 8:return e.next=10,h.collection("orders").add(O);case 10:v.push("/");case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),console.log(e.t0);case 16:return e.prev=16,d(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[1,13,16,19]])})));return function(){return e.apply(this,arguments)}}(),j=s.a.createElement(Pe,Object.assign({order:O},{type:"create"}));return s.a.createElement(ke,Object.assign({content:j},{isLast:!0,onNext:y,disabled:m}))},Be=a(103),Ue=a.n(Be),Me=a(104),He=a.n(Me),Ve=a(105),Ge=a.n(Ve),Ke=new Map([["landSurvey",s.a.createElement(Ue.a,null)],["estoppelLetter",s.a.createElement(He.a,null)],["lienSearch",s.a.createElement(Y.a,null)],["permitResolution",s.a.createElement(Ge.a,null)]]),Ye=function(e){var t=e.type,a=e.selected,r=_e();return s.a.createElement(N.a,{className:"".concat(r.container," ").concat(a?r.selected:"")},s.a.createElement(O.a,{container:!0,alignItems:"center",spacing:1},s.a.createElement(O.a,{item:!0},s.a.createElement("div",null,Ke.get(t))),s.a.createElement(O.a,{item:!0},s.a.createElement(y.a,{variant:"h6"},n[t]))))},_e=Object(x.a)((function(e){return{container:{padding:e.spacing(3)},icon:{margin:e.spacing(0,2)},selected:{borderColor:e.palette.primary.main,border:"solid"}}})),Xe=function(e){var t=e.basePath,a=e.orderTypes,n=e.setOrderTypes,r=($e(),Object(b.g)()),c=[{name:"lienSearch",label:"Lien Search",selected:a.lienSearch,description:"Lorep ilsum Lorep ilsumLorep ilsumLorep ilsum"},{name:"estoppelLetter",label:"Estoppel Letter",selected:a.estoppelLetter,description:"Lorep ilsum Lorep ilsumLorep ilsumLorep ilsum"},{name:"landSurvey",label:"Land Survey",selected:a.landSurvey,description:"Lorep ilsum Lorep ilsumLorep ilsumLorep ilsum"},{name:"permitResolution",label:"Permit Resolution",selected:a.permitResolution,description:"Lorep ilsum Lorep ilsumLorep ilsumLorep ilsum"}],i=s.a.createElement(s.a.Fragment,null,s.a.createElement(O.a,{item:!0},s.a.createElement(y.a,{variant:"h6"},"Select Type of Order"),s.a.createElement(Ne.a,null)),s.a.createElement(O.a,{item:!0},s.a.createElement(y.a,{variant:"body1"},"You can select multiple order types for the same property")),s.a.createElement(O.a,{item:!0,container:!0,spacing:2},c.map((function(e,t){return s.a.createElement(O.a,{key:"type-".concat(t),item:!0,xs:6,md:3,onClick:function(){return function(e){n((function(t){var a=Object(T.a)({},t);return a[e]=!a[e],a}))}(e.name)}},s.a.createElement(Ye,{type:e.name,selected:a[e.name]}))}))));return s.a.createElement(ke,Object.assign({content:i},{isFirst:!0},{onNext:function(){r.push("".concat(t,"/2"),{orderType:a})}}))},$e=Object(x.a)((function(e){return{cardSelected:{border:"solid",borderColor:e.palette.primary.main}}})),Je=a(19),Ze=a(107),Qe=a.n(Ze),et=a(106),tt=a.n(et),at=function(e){var t=e.setAssociations,a=e.associations,n=e.setIsAssociationsReady,r=function(e,n,r){var c=Object(Je.a)(a);c[r][e]=n.target.value,t(c)};return Object(o.useEffect)((function(){var e=!a.some((function(e){return Object(Q.some)(e,(function(e){return!e}))}));n(e)}),[a,n]),s.a.createElement(s.a.Fragment,null,s.a.createElement(O.a,{item:!0},s.a.createElement(y.a,{variant:"h5"},"Associations (Estoppel Letter)"),s.a.createElement(Ne.a,null)),a.map((function(e,a){return s.a.createElement(O.a,{item:!0,container:!0,key:"association-form-".concat(a),alignItems:"center",spacing:2},s.a.createElement(O.a,{item:!0,container:!0,alignItems:"center",spacing:1,xs:6,md:6},0!==a&&s.a.createElement(O.a,{item:!0,xs:1},s.a.createElement(ge.a,{onClick:function(){return function(e){t((function(t){var a=Object(Je.a)(t);return a.splice(e,1),a}))}(a)},size:"small"},s.a.createElement(tt.a,null))),s.a.createElement(O.a,{item:!0,xs:0!==a?11:12},s.a.createElement(j.a,{fullWidth:!0,autoComplete:"nope",required:!0,label:"Association Name",value:e.name,variant:"outlined",onChange:function(e){return r("name",e,a)}}))),s.a.createElement(O.a,{item:!0,xs:6,md:6},s.a.createElement(j.a,{fullWidth:!0,autoComplete:"nope",required:!0,label:"Association Number",value:e.number,variant:"outlined",onChange:function(e){return r("number",e,a)}})))})),s.a.createElement(O.a,{item:!0,xs:3},s.a.createElement(C.a,{variant:"text",onClick:function(){t((function(e){return[].concat(Object(Je.a)(e),[Object(T.a)({},ht)])}))},startIcon:s.a.createElement(Qe.a,null)},"Add Association")))},nt=a(191),rt=a(204),ct=a(205),it=a(220);function lt(e){var t=e.isNotRequired,a=e.name,n=e.isNumber,r=e.label,c=e.value,i=e.setter;return e.isBoolean?s.a.createElement(nt.a,null,s.a.createElement(rt.a,null,s.a.createElement(ct.a,{label:r,control:s.a.createElement(it.a,{checked:c,onChange:function(){return i((function(e){var t=Object(T.a)({},e);return t[a]=!e[a],t}))}})}))):s.a.createElement(j.a,{fullWidth:!0,autoComplete:"nope",required:!t,onChange:function(e){var t=n?parseInt(e.target.value):e.target.value;i((function(e){var n=Object(T.a)({},e);return n[a]=t,n}))},value:c,label:r,variant:"outlined"})}var ot=function(e){var t=e.landSurvey,a=e.setLandSurvey,n=e.setIsLandSurveyReady,r=[{label:l.lenderCertification,key:"lenderCertification",xs:12,md:6},{label:l.buyerCertification,key:"buyerCertification",xs:12,md:6},{label:l.underwriterCertification,key:"underwriterCertification",xs:12,md:6},{label:l.titleCompany,key:"titleCompany",xs:12,md:6},{label:l.hardCopy,key:"hardCopy",xs:12,md:6,isBoolean:!0}];return Object(o.useEffect)((function(){var e=!r.some((function(e){return"hardCopy"!==e.key&&!e.isNotRequired&&!t[e.key]}));n(e)}),[r,t,n]),s.a.createElement(s.a.Fragment,null,s.a.createElement(O.a,{item:!0},s.a.createElement(y.a,{variant:"h5"},"Land Survey"),s.a.createElement(Ne.a,null)),s.a.createElement(O.a,{item:!0,container:!0,spacing:2},r.map((function(e,n){var r;return s.a.createElement(O.a,{key:"data-".concat(n),item:!0,xs:e.xs,md:e.md},s.a.createElement(lt,{name:e.key,isNotRequired:e.isNotRequired,value:null!==(r=t[e.key])&&void 0!==r?r:"",setter:a,label:e.label,isBoolean:e.isBoolean}))}))))},st=function(e){var t=e.address,a=e.setAddress,n=e.setIsAddressReady,r=[{label:c.address1,key:"address1",md:6,xs:12},{label:c.address2,key:"address2",isNotRequired:!0,md:6,xs:12},{label:c.unit,key:"unit",isNotRequired:!0,md:3,xs:12},{label:c.city,key:"city",md:3,xs:12},{label:c.state,key:"state",md:3,xs:12},{label:c.zipCode,key:"zipCode",md:3,xs:12}];return Object(o.useEffect)((function(){var e=r.some((function(e){return!e.isNotRequired&&!t[e.key]}));n(!e)}),[r,t,n]),s.a.createElement(O.a,{item:!0,container:!0,spacing:2,xs:12,md:12,direction:"column"},s.a.createElement(O.a,{item:!0},s.a.createElement(y.a,{variant:"h5"},"Property Address"),s.a.createElement(Ne.a,null)),s.a.createElement(O.a,{item:!0,container:!0,spacing:2},r.map((function(e,n){var r;return s.a.createElement(O.a,{key:"data-".concat(n),item:!0,xs:e.xs,md:e.md},s.a.createElement(lt,{name:e.key,isNotRequired:e.isNotRequired,value:null!==(r=t[e.key])&&void 0!==r?r:"",setter:a,label:e.label}))}))))},ut=a(28),mt=a(218),dt=a(87),pt=function(e){var t=e.orderData,a=e.setOrderData,n=e.setIsDataReady,r=[{label:i.orderNumber,key:"orderNumber",md:4,xs:12},{label:i.folio,key:"folio",isNumber:!0,md:4,xs:12},{label:i.legalDescription,key:"legalDescription",md:4,xs:12},{label:i.seller,key:"seller",md:3,xs:12},{label:i.buyer,key:"buyer",md:3,xs:12},{label:i.listingAgent,key:"listingAgent",isNotRequired:!0,md:3,xs:12},{label:i.listingAgentPhone,key:"listingAgentPhone",isNotRequired:!0,isNumber:!0,md:3,xs:12},{label:i.specialInstructions,key:"specialInstructions",isNotRequired:!0,md:12,xs:12}];return Object(o.useEffect)((function(){var e=r.some((function(e){return!e.isNotRequired&&!t[e.key]}));n(!e)}),[r,t,n]),s.a.createElement(O.a,{item:!0,container:!0,spacing:2,xs:12,direction:"column"},s.a.createElement(O.a,{item:!0},s.a.createElement(y.a,{variant:"h5"},"Order Information"),s.a.createElement(Ne.a,null)),s.a.createElement(O.a,{item:!0,container:!0,spacing:2},r.map((function(e,n){var r;return s.a.createElement(O.a,{key:"data-".concat(n),item:!0,xs:e.xs,md:e.md},s.a.createElement(lt,{name:e.key,isNotRequired:e.isNotRequired,value:null!==(r=t[e.key])&&void 0!==r?r:"",setter:a,label:e.label}))})),s.a.createElement(O.a,{item:!0,xs:12,md:6},s.a.createElement(ut.a,{utils:dt.a},s.a.createElement(mt.a,{fullWidth:!0,variant:"inline",format:"MM/dd/yyyy",margin:"normal",id:"date-picker-inline",inputVariant:"outlined",label:"Needed Date",value:t.neededDate,onChange:function(e){var t=null===e||void 0===e?void 0:e.toLocaleDateString();console.log(t),a((function(e){var a=Object(T.a)({},e);return a.neededDate=null!==t&&void 0!==t?t:"",a}))},KeyboardButtonProps:{"aria-label":"change date"}}))),s.a.createElement(O.a,{item:!0,xs:12,md:6},s.a.createElement(ut.a,{utils:dt.a},s.a.createElement(mt.a,{fullWidth:!0,variant:"inline",format:"MM/dd/yyyy",margin:"normal",id:"date-picker-inline",inputVariant:"outlined",label:"Closing Date",value:t.closingDate,onChange:function(e){var t=null===e||void 0===e?void 0:e.toLocaleDateString();console.log(t),a((function(e){var a=Object(T.a)({},e);return a.closingDate=null!==t&&void 0!==t?t:"",a}))},KeyboardButtonProps:{"aria-label":"change date"}})))))},ft=function(e){var t=e.basePath,a=e.setData,n=e.setAssociations,r=e.associations,c=e.orderTypes,i=e.address,l=e.setAddress,u=e.landSurvey,m=e.setLandSurvey,d=e.data,p=Object(b.g)(),f=Object(o.useState)(!1),g=Object(E.a)(f,2),v=g[0],h=g[1],y=Object(o.useState)(!1),j=Object(E.a)(y,2),C=j[0],x=j[1],S=Object(o.useState)(!1),k=Object(E.a)(S,2),w=k[0],N=k[1],I=Object(o.useState)(!1),A=Object(E.a)(I,2),L=A[0],R=A[1],D=v&&C&&(!c.estoppelLetter||w)&&(!c.landSurvey||L),T=s.a.createElement(s.a.Fragment,null,s.a.createElement(O.a,{item:!0,container:!0,spacing:2},s.a.createElement(st,Object.assign({setIsAddressReady:h},{address:i},{setAddress:l}))),s.a.createElement(O.a,{item:!0,container:!0,spacing:2},s.a.createElement(pt,Object.assign({setIsDataReady:x},{orderData:d,setOrderData:a}))),s.a.createElement(O.a,{item:!0,container:!0,spacing:2},c.estoppelLetter&&s.a.createElement(O.a,{item:!0,container:!0,spacing:2,xs:12,md:c.landSurvey?6:12,direction:"column"},s.a.createElement(at,Object.assign({setIsAssociationsReady:N},{setAssociations:n},{associations:r}))),c.landSurvey&&s.a.createElement(O.a,{item:!0,container:!0,spacing:2,xs:12,md:c.estoppelLetter?6:12,direction:"column"},s.a.createElement(ot,Object.assign({setIsLandSurveyReady:R},{landSurvey:u},{setLandSurvey:m})))));return s.a.createElement(ke,Object.assign({content:T},{onNext:function(){a(d),p.push("".concat(t,"/3"),{orderType:c,data:d,associations:r})},disabled:!D}))},Et=a(208),bt={address1:"",address2:"",unit:"",city:"",state:"",zipCode:""},gt={lenderCertification:"",buyerCertification:"",underwriterCertification:"",titleCompany:"",hardCopy:!1},vt={orderNumber:"",specialInstructions:"",folio:0,legalDescription:"",closingDate:(new Date).toLocaleDateString(),neededDate:(new Date).toLocaleDateString(),seller:"",buyer:"",listingAgent:"",listingAgentPhone:0},ht={name:"",number:""},Ot={lienSearch:!1,permitResolution:!1,estoppelLetter:!1,landSurvey:!1},yt=function(){var e=Object(b.g)(),t=e.location.state,a=(t=void 0===t?{orderType:null,data:null,associations:[Object(T.a)({},ht)]}:t).orderType,n=t.data,r=t.associations,c=Object(o.useState)(!1),i=Object(E.a)(c,2),l=i[0],u=i[1],m=Object(o.useState)(n||vt),d=Object(E.a)(m,2),p=d[0],f=d[1],g=Object(o.useState)(bt),v=Object(E.a)(g,2),h=v[0],O=v[1],y=Object(o.useState)(gt),j=Object(E.a)(y,2),C=j[0],x=j[1],S=Object(o.useState)(r||[Object(T.a)({},ht)]),k=Object(E.a)(S,2),N=k[0],I=k[1],A=Object(o.useState)(a||Ot),L=Object(E.a)(A,2),R=L[0],D=L[1],W=Object(b.h)(),F=W.step,z=W.id;Object(o.useEffect)((function(){z&&w.a.firestore().collection("orders").doc(z).get().then((function(t){if(t.exists){var a=function(e){var t=Object(Q.pickBy)(e,(function(e,t){return!Object(Q.includes)(["address","orderType","associations"],t)}));return{address:e.address,orderType:e.orderType,orderData:t,associations:e.associations,landSurvey:e.landSurvey}}(t.data()),n=a.orderData,r=a.orderType,c=a.associations,i=a.address,l=a.landSurvey;f(n),D(r),I((function(e){return c?Object(Q.extend)(c):[ht]})),O(i),x((function(e){return l?Object(Q.extend)(e,l):gt}))}else e.push("/")})).catch((function(e){return console.log("Order error",e)})).finally((function(){u(!1)}))}),[e,z]);var P=z?"/update/".concat(z):"/new-order",q=z?"/order/".concat(z):"/";if(l)return s.a.createElement(Et.a,null);if(!F)return s.a.createElement(b.a,{to:"/"});var B=[{label:"Type of Order",component:s.a.createElement(Xe,Object.assign({basePath:P},{orderTypes:R},{setOrderTypes:D}))},{label:"Property Information",component:s.a.createElement(ft,Object.assign({address:h},{setAddress:O},{setData:f},{setAssociations:I},{associations:N},{setLandSurvey:x},{landSurvey:C},{orderTypes:R},{data:p},{basePath:P}))},{label:"Confirm Order",component:s.a.createElement(qe,Object.assign({address:h},{landSurvey:C},{associations:N},{id:z},{data:p},{orderType:R}))}];return s.a.createElement(xe,Object.assign({cancelPath:q},{stepComponents:B},{activeStep:F,toolbarHeader:"Create New Order"}))},jt=a(209),Ct=a(210),xt=function(e){var t=e.children,a=St();return s.a.createElement(s.a.Fragment,null,s.a.createElement(jt.a,null),s.a.createElement("img",{alt:"",className:a.logo,src:"".concat("","/logo.png")}),s.a.createElement(Ct.a,{maxWidth:"sm"},s.a.createElement(be.a,null),t))},St=Object(x.a)((function(){return{logo:{height:120}}})),kt=a(213),wt=a(115),Nt=a(211),It=a(226),At=a(212),Lt=a(110),Rt=a.n(Lt),Dt=Object(x.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},link:{textDecoration:"none",color:"black",flexGrow:1},logo:{height:60,width:140}}})),Tt=function(){var e=Dt(),t=s.a.useState(null),a=Object(E.a)(t,2),n=a[0],r=a[1],c=Boolean(n),i=Object(o.useContext)(D),l=Object(b.g)(),u=function(){var e=Object(f.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Le.auth().signOut();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return s.a.createElement(Ee.a,{position:"absolute"},s.a.createElement(be.a,null,s.a.createElement(S.a,{to:"/",className:e.link},s.a.createElement("img",{alt:"",className:e.logo,src:"".concat("","/logo-transparent.png")})),s.a.createElement(ge.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){r(e.currentTarget)},color:"inherit"},s.a.createElement(Rt.a,null)),s.a.createElement(wt.a,{id:"menu-appbar",anchorEl:n,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:c,onClose:function(){r(null)}},s.a.createElement(X.a,null,s.a.createElement(Nt.a,null,s.a.createElement(It.a,null,null===i||void 0===i?void 0:i.email.charAt(0))),s.a.createElement(At.a,null,null===i||void 0===i?void 0:i.email)),(null===i||void 0===i?void 0:i.admin)&&s.a.createElement(X.a,{onClick:function(){l.push("/admin/manage")}},"Admin"),s.a.createElement(Ne.a,null),s.a.createElement(X.a,{onClick:u},"Logout"))))},Wt=Object(o.createContext)({loading:!1,setLoading:function(){}}),Ft=function(e){var t=e.children,a=Object(o.useState)(!1),n=Object(E.a)(a,2),r=n[0],c=n[1],i=zt();return s.a.createElement(s.a.Fragment,null,s.a.createElement(Tt,null),s.a.createElement(be.a,null),r&&s.a.createElement(kt.a,null),s.a.createElement(Wt.Provider,{value:{loading:r,setLoading:c}},s.a.createElement(O.a,{container:!0,direction:"column",alignItems:"center",spacing:3,className:i.content},t)))},zt=Object(x.a)((function(e){return{content:{padding:e.spacing(3,4,6,4),wordBreak:"break-word",minWidth:0}}})),Pt=function(e){var t=e.currentStatus,a=e.setCurrentStatus,n=Object(o.useContext)(D);return s.a.createElement(O.a,{item:!0,container:!0,alignItems:"center",justify:"space-between"},s.a.createElement(O.a,{item:!0},s.a.createElement(y.a,{variant:"subtitle1"},"Status")),s.a.createElement(O.a,{item:!0,xs:7},(null===n||void 0===n?void 0:n.admin)?s.a.createElement(j.a,{label:"Order Status",select:!0,variant:"outlined",fullWidth:!0,value:t,onChange:function(e){return a(e.target.value)}},Object.keys(r).map((function(e,t){return s.a.createElement(X.a,{key:"status-".concat(t),value:e},r[e])}))):s.a.createElement(y.a,{variant:"body2"},t?r[t]:"")))},qt=function(e){var t=e.currentAssignee,a=e.setCurrentAssignee,n=Object(o.useState)([]),r=Object(E.a)(n,2),c=r[0],i=r[1],l=Object(o.useContext)(D),u=w.a.firestore();return Object(o.useEffect)((function(){(null===l||void 0===l?void 0:l.admin)&&u.collection("employees").get().then((function(e){var t=[];e.forEach((function(e){t.push(Object(T.a)({},e.data()))})),i(t)})).catch((function(e){return console.log(e)}))}),[l,u]),s.a.createElement(O.a,{item:!0,container:!0,alignItems:"center",justify:"space-between"},s.a.createElement(O.a,{item:!0},s.a.createElement(y.a,{variant:"subtitle1"},"Asignee")),s.a.createElement(O.a,{item:!0,xs:7},(null===l||void 0===l?void 0:l.admin)?s.a.createElement(j.a,{label:"Assigned Employee",select:!0,variant:"outlined",fullWidth:!0,value:t,onChange:function(e){return a(e.target.value)}},c.map((function(e,t){return s.a.createElement(X.a,{key:"status-".concat(t),value:e.email},e.email)}))):s.a.createElement(y.a,{variant:"body2"},t||"Not Assigned Yet")))},Bt=a(214),Ut=a(206),Mt=a(215),Ht=a(207),Vt=function(e){var t=e.open,a=e.description,n=e.title,r=e.setOpen,c=e.confirmAction,i=function(){r(!1)};return s.a.createElement(fe.a,{open:t,onClose:i,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},s.a.createElement(Bt.a,null,n),s.a.createElement(Ut.a,null,s.a.createElement(Mt.a,null,a)),s.a.createElement(Ht.a,null,s.a.createElement(C.a,{onClick:i,color:"primary"},"Close"),c&&s.a.createElement(C.a,{onClick:c,color:"primary",autoFocus:!0},"Agree")))},Gt=a(216),Kt=a(223),Yt=a(111),_t=a.n(Yt);function Xt(e){return s.a.createElement(Gt.a,Object.assign({},e,{direction:"up",timeout:400}))}var $t=function(e){var t=e.message,a=e.setMessage,n=e.messageType,r=void 0===n?"error":n,c=Jt(),i=Object(o.useState)(!!t),l=Object(E.a)(i,2),u=l[0],m=l[1],d=Object(o.useRef)(0);Object(o.useEffect)((function(){return function(){return window.clearTimeout(d.current)}}),[]);var p=function(){window.clearTimeout(d.current),m(!1),d.current=window.setTimeout((function(){return a("")}),400)};return Object(o.useEffect)((function(){m(!!t)}),[t]),s.a.createElement(Kt.a,{open:u,onClose:p,anchorOrigin:{vertical:"bottom",horizontal:"left"},autoHideDuration:6e3,ContentProps:{className:"error"===r?c.error:c.success},TransitionComponent:Xt,message:s.a.createElement("div",{className:c.message},"error"===r&&s.a.createElement(_t.a,{className:c.icon}),"success"===r&&s.a.createElement(Ae.a,{className:c.icon}),t),action:[s.a.createElement(ge.a,{key:"close","aria-label":"close",color:"inherit",onClick:p},s.a.createElement(he.a,null))]})},Jt=Object(x.a)((function(e){return{error:{backgroundColor:e.palette.error.dark},success:{backgroundColor:"green"},message:{display:"flex",alignItems:"center"},icon:{marginRight:e.spacing(1)}}})),Zt=function(e){var t=e.order,a=e.orderId,n=Object(o.useState)(t.status),r=Object(E.a)(n,2),c=r[0],i=r[1],l=Object(o.useState)(t.assignee),u=Object(E.a)(l,2),m=u[0],d=u[1],b=Object(o.useState)(!1),g=Object(E.a)(b,2),v=g[0],h=g[1],j=Object(o.useState)(!1),x=Object(E.a)(j,2),S=x[0],k=x[1],I=Object(o.useState)(""),A=Object(E.a)(I,2),L=A[0],R=A[1],W=Object(o.useState)(""),F=Object(E.a)(W,2),z=F[0],P=F[1],q=Object(o.useContext)(D),B=w.a.firestore(),U=Qt(),M=Object(o.useMemo)((function(){var e=Object(T.a)({},t);return e.assignee=m,e.status=c,e}),[m,c,t]),H=function(){var e=Object(f.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),e.prev=1,e.next=4,B.collection("orders").doc(a).update(M);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),P(e.t0.message||e.t0);case 9:return e.prev=9,h(!1),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[1,6,9,12]])})));return function(){return e.apply(this,arguments)}}();return s.a.createElement(s.a.Fragment,null,s.a.createElement($t,Object.assign({message:z},{setMessage:P})),s.a.createElement(Vt,Object.assign({open:S},{setOpen:k},{title:L,description:"Please send an email to facs95@gmail.com with the request and we will take care of it."})),s.a.createElement(N.a,{className:U.paper},s.a.createElement(O.a,{container:!0,direction:"column",spacing:3,className:U.cardContainer},s.a.createElement(O.a,{item:!0},s.a.createElement(y.a,{variant:"h5"},"Order Status"),s.a.createElement(Ne.a,null)),s.a.createElement(Pt,Object.assign({currentStatus:c},{setCurrentStatus:i})),s.a.createElement(qt,Object.assign({currentAssignee:m},{setCurrentAssignee:d})),(null===q||void 0===q?void 0:q.admin)?s.a.createElement(O.a,{item:!0,container:!0},s.a.createElement(C.a,{variant:"contained",color:"primary",disabled:Object(Q.isEqual)(t,M)||v,onClick:H},"Apply Changes")):s.a.createElement(O.a,{item:!0,container:!0,direction:"column",spacing:1},s.a.createElement(O.a,{item:!0,xs:6},s.a.createElement(C.a,{fullWidth:!0,size:"small",variant:"contained",color:"primary",onClick:function(){R("You want to put this order on Hold?"),k(!0)}},"Hold")),s.a.createElement(O.a,{item:!0,xs:6},s.a.createElement(C.a,{fullWidth:!0,size:"small",variant:"outlined",onClick:function(){R("You want cancel this order?"),k(!0)}},"Cancel"))))))},Qt=Object(x.a)((function(e){return{cardContainer:{padding:e.spacing(3)},paper:{width:"100%"}}})),ea=a(112),ta=a.n(ea),aa=a(113),na=a.n(aa),ra=function(e){var t=e.orderId,a=e.orgId,n=Object(o.useState)([]),r=Object(E.a)(n,2),c=r[0],i=r[1],l=Object(o.useState)(""),u=Object(E.a)(l,2),m=u[0],d=u[1],p=Object(o.useState)("error"),f=Object(E.a)(p,2),b=f[0],g=f[1],v=Object(o.useState)(!1),h=Object(E.a)(v,2),j=h[0],x=h[1],S="org-".concat(a,"/order-").concat(t,"/"),k=Object(o.useContext)(D),I=w.a.storage(),A=function(e){g("error"),d(e&&e.message)},L=function(e){g("success"),d(e)},R=Object(o.useCallback)((function(){k&&I.ref().child(S).listAll().then((function(e){i(e.items.map((function(e){return e.name})))})).catch((function(e){return A(e)}))}),[I,k,S]);Object(o.useEffect)((function(){R()}),[R]);var T=ca();return s.a.createElement(s.a.Fragment,null,s.a.createElement($t,Object.assign({message:m},{setMessage:d},{messageType:b})),s.a.createElement(N.a,{className:T.fullWidth},s.a.createElement(O.a,{container:!0,direction:"column",spacing:3,className:T.cardContainer},s.a.createElement(O.a,{item:!0},s.a.createElement(y.a,{variant:"h5"},"Documents"),s.a.createElement(Ne.a,null)),s.a.createElement(O.a,{item:!0,container:!0,direction:"column",spacing:2},0===c.length?s.a.createElement(te,{width:200,title:"No documents yet",imageFile:"documents.svg"}):c.map((function(e,t){return s.a.createElement(O.a,{key:"file-".concat(t),item:!0,container:!0,justify:"space-between",wrap:"nowrap"},s.a.createElement(O.a,{item:!0,container:!0,spacing:1,alignItems:"center",wrap:"nowrap"},s.a.createElement(O.a,{item:!0},s.a.createElement(ta.a,null)),s.a.createElement(O.a,{item:!0},s.a.createElement(y.a,{variant:"body1",noWrap:!0},e))),s.a.createElement(O.a,{item:!0},s.a.createElement(ge.a,{onClick:function(){return t=e,void I.ref("".concat(S).concat(t)).getDownloadURL().then((function(e){var a=new XMLHttpRequest;a.responseType="blob",a.onload=function(){var e,n=a.response,r=window.URL.createObjectURL(n),c=document.createElement("a");c.href=r,c.setAttribute("download",t),document.body.appendChild(c),c.click(),null===(e=c.parentNode)||void 0===e||e.removeChild(c)},a.open("GET",e),a.send()})).catch((function(e){return console.log(e)}));var t}},s.a.createElement(na.a,null))),k&&k.admin&&s.a.createElement(O.a,{item:!0},s.a.createElement(ge.a,{onClick:function(){return t=e,void I.ref().child(S).child(t).delete().then((function(){L("Succesfully Delete ".concat(t)),R()})).catch((function(e){A(e)}));var t}},s.a.createElement(he.a,null))))}))),k&&k.admin&&s.a.createElement(O.a,{item:!0,container:!0,spacing:1},s.a.createElement(O.a,{item:!0},s.a.createElement("input",{className:T.input,style:{display:"none"},id:"raised-button-file",multiple:!0,type:"file",onChange:function(e){var t=e.target.files;if(t){var a=I.ref().child(S),n=Object(Q.map)(t,(function(e){return a.child(e.name).put(e)}));x(!0),Promise.all(n).then((function(){L("Succesful Upload"),R()})).catch((function(e){return A(e)})).finally((function(){return x(!1)}))}}}),s.a.createElement("label",{htmlFor:"raised-button-file"},s.a.createElement(C.a,{color:"primary",size:"large",variant:"contained",component:"span",disabled:j},"Upload New File"))),j&&s.a.createElement(O.a,{item:!0},s.a.createElement(Et.a,null))))))},ca=Object(x.a)((function(e){return{input:{display:"none"},cardContainer:{padding:e.spacing(3)},fullWidth:{width:"100%"}}})),ia=function(){var e=Object(o.useState)(null),t=Object(E.a)(e,2),a=t[0],n=t[1],r=la(),c=Object(o.useContext)(Wt).setLoading,i=Object(b.h)().id,l=w.a.firestore();if(Object(o.useEffect)((function(){c(!0),i&&l.collection("orders").doc(i).get().then((function(e){e.exists?n(Object(T.a)(Object(T.a)({},e.data()),{},{id:e.id})):console.log("No such document!")})).catch((function(e){return console.log("here",e)})).finally((function(){c(!1)}))}),[l,i,c]),!a)return s.a.createElement(s.a.Fragment,null," ");var u=s.a.createElement(N.a,null,s.a.createElement(O.a,{container:!0,direction:"column",spacing:3,className:r.cardContainer},s.a.createElement(Pe,Object.assign({type:"info"},{order:a}))));return s.a.createElement(s.a.Fragment,null,s.a.createElement(O.a,{item:!0,container:!0,spacing:3},s.a.createElement(O.a,{item:!0,sm:12,md:8},u),s.a.createElement(O.a,{item:!0,container:!0,direction:"column",sm:12,md:4,spacing:3},s.a.createElement(O.a,{item:!0,container:!0},s.a.createElement(Zt,Object.assign({order:a},{orderId:i}))),s.a.createElement(O.a,{item:!0,container:!0},s.a.createElement(ra,{orderId:i,orgId:a.orgId})))))},la=Object(x.a)((function(e){return{cardContainer:{padding:e.spacing(3)}}})),oa=function(e){var t=e.email,a=e.setEmail,n=e.onSetNewAdminClick;return s.a.createElement(s.a.Fragment,null,s.a.createElement(O.a,{item:!0,container:!0,direction:"column",wrap:"nowrap"},s.a.createElement(O.a,{item:!0,xs:12},s.a.createElement(y.a,{variant:"h6"},"Set New Admin")),s.a.createElement(O.a,{item:!0,xs:12},s.a.createElement(Ne.a,null))),s.a.createElement(O.a,{item:!0,container:!0,spacing:2,direction:"column"},s.a.createElement(O.a,{item:!0},s.a.createElement(j.a,{size:"small",fullWidth:!0,label:"Email",variant:"outlined",value:t,onChange:function(e){return a(e.target.value)},type:"email"})),s.a.createElement(O.a,{item:!0},s.a.createElement(C.a,{disabled:!t,fullWidth:!0,variant:"contained",onClick:n,color:"primary"},"Set Admin"))))},sa=function(e){var t=e.orgName,a=e.setOrgName,n=e.onCreateOrgClick,r=e.phoneNumber,c=e.setAddress,i=e.address,l=e.setPhoneNumber;return s.a.createElement(s.a.Fragment,null,s.a.createElement(O.a,{item:!0,container:!0,direction:"column",wrap:"nowrap"},s.a.createElement(O.a,{item:!0,xs:12},s.a.createElement(y.a,{variant:"h6"},"Create New Organization")),s.a.createElement(O.a,{item:!0,xs:12},s.a.createElement(Ne.a,null))),s.a.createElement(O.a,{item:!0,container:!0,spacing:2,direction:"column"},s.a.createElement(O.a,{item:!0},s.a.createElement(j.a,{fullWidth:!0,size:"small",label:"Company Name",variant:"outlined",value:t,onChange:function(e){return a(e.target.value)}})),s.a.createElement(O.a,{item:!0},s.a.createElement(j.a,{fullWidth:!0,size:"small",label:"Phone Number",variant:"outlined",value:r,onChange:function(e){return l(e.target.value)}})),s.a.createElement(O.a,{item:!0},s.a.createElement(j.a,{fullWidth:!0,size:"small",label:"Address",variant:"outlined",value:i,onChange:function(e){return c(e.target.value)}})),s.a.createElement(O.a,{item:!0},s.a.createElement(C.a,{disabled:!i||!r||!t,fullWidth:!0,variant:"contained",onClick:n,color:"primary"},"Create Organization"))))},ua=function(e){var t=e.userToOrg,a=e.setUserToOrg,n=e.selectedOrg,r=e.setSelectedOrg,c=e.orgs,i=e.onAddUserToOrgClick;return s.a.createElement(s.a.Fragment,null,s.a.createElement(O.a,{item:!0,container:!0,direction:"column",wrap:"nowrap"},s.a.createElement(O.a,{item:!0,xs:12},s.a.createElement(y.a,{variant:"h6"},"Add User to Org")),s.a.createElement(O.a,{item:!0,xs:12},s.a.createElement(Ne.a,null))),s.a.createElement(O.a,{item:!0,container:!0,direction:"column",spacing:2},s.a.createElement(O.a,{item:!0},s.a.createElement(j.a,{size:"small",fullWidth:!0,label:"Email",variant:"outlined",value:t,onChange:function(e){return a(e.target.value)},type:"email"})),s.a.createElement(O.a,{item:!0},s.a.createElement(j.a,{size:"small",variant:"outlined",fullWidth:!0,select:!0,value:n,onChange:function(e){return r(e.target.value)}},0===c.length?s.a.createElement(X.a,{value:""},"No Organizations"):c.map((function(e,t){return s.a.createElement(X.a,{key:t,value:e.id},e.name)})))),s.a.createElement(O.a,{item:!0},s.a.createElement(C.a,{disabled:!t||!n,fullWidth:!0,variant:"contained",onClick:i,color:"primary"},"Add User"))))},ma=function(){var e=Re.a.firestore(),t=Object(o.useContext)(D),a=Object(o.useState)(""),n=Object(E.a)(a,2),r=n[0],c=n[1],i=Object(o.useState)(""),l=Object(E.a)(i,2),u=l[0],m=l[1],d=Object(o.useState)(""),g=Object(E.a)(d,2),v=g[0],h=g[1],y=Object(o.useState)([]),j=Object(E.a)(y,2),C=j[0],x=j[1],S=Object(o.useState)(""),k=Object(E.a)(S,2),w=k[0],N=k[1],I=Object(o.useState)(""),A=Object(E.a)(I,2),L=A[0],R=A[1],W=Object(o.useState)(""),F=Object(E.a)(W,2),z=F[0],P=F[1],q=Object(o.useState)(""),B=Object(E.a)(q,2),U=B[0],M=B[1],H=Object(o.useState)("success"),V=Object(E.a)(H,2),G=V[0],K=V[1],Y=Object(o.useCallback)((function(){e.collection("organizations").get().then((function(e){var t=[];e.forEach((function(e){t.push(Object(T.a)(Object(T.a)({},e.data()),{},{id:e.id}))})),x(t),N(t[0].id)})).catch((function(e){return console.log(e)}))}),[e]);if(Object(o.useEffect)((function(){Y()}),[Y]),!(null===t||void 0===t?void 0:t.admin))return s.a.createElement(b.a,{to:"/"});var _=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"error";K(t),h(e)},X=function(){var t=Object(f.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.collection("organizations").add({name:u,users:[],phoneNumber:L,address:z,created_on:Re.a.firestore.FieldValue.serverTimestamp()});case 3:_("Org Create Succesfully","success"),m(""),Y(),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),_(t.t0.message||t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}(),$=function(){var e=Object(f.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=Re.a.functions().httpsCallable("addOrgToUser"),e.next=4,t({email:U,orgId:w});case 4:_("User Added to Org Succesfully","success"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),_(e.t0.message||e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return s.a.createElement(s.a.Fragment,null,s.a.createElement($t,Object.assign({message:v,setMessage:h},{messageType:G})),s.a.createElement(O.a,{item:!0,xs:4,container:!0,justify:"center",spacing:3},s.a.createElement(O.a,{item:!0,container:!0,spacing:3},s.a.createElement(oa,Object.assign({email:r},{setEmail:c},{onSetNewAdminClick:function(){Re.a.functions().httpsCallable("setAdminUser")({email:r}).then((function(){_("Admin Set Succesfully","success")})).catch((function(e){_(e.message||e)}))}}))),s.a.createElement(O.a,{item:!0,container:!0,spacing:3},s.a.createElement(sa,Object.assign({phoneNumber:L,setPhoneNumber:R,address:z,setAddress:P},{onCreateOrgClick:X},{orgName:u},{setOrgName:m}))),s.a.createElement(O.a,{item:!0,container:!0,spacing:3},s.a.createElement(ua,Object.assign({orgs:C},{userToOrg:U},{setUserToOrg:M},{selectedOrg:w},{setSelectedOrg:N},{onAddUserToOrgClick:$})))))},da=function(e){return s.a.createElement(xt,null,e)},pa=function(e){return s.a.createElement(Ft,null,e)},fa=function(){var e=Object(o.useContext)(D);return(null===e||void 0===e?void 0:e.uid)?s.a.createElement(s.a.Fragment,null,s.a.createElement(b.b,{exact:!0,path:"/",render:function(){return pa(s.a.createElement(le,null))}}),s.a.createElement(b.b,{exact:!0,path:"/new-order/:step",render:function(){return pa(s.a.createElement(yt,null))}}),s.a.createElement(b.b,{exact:!0,path:"/update/:id/:step",render:function(){return pa(s.a.createElement(yt,null))}}),s.a.createElement(b.b,{exact:!0,path:"/order/:id",render:function(){return pa(s.a.createElement(ia,null))}}),s.a.createElement(b.b,{exact:!0,path:"/admin/manage",render:function(){return pa(s.a.createElement(ma,null))}})):s.a.createElement(s.a.Fragment,null,s.a.createElement(b.b,{exact:!0,path:"/",render:function(){return da(s.a.createElement(L,null))}}),s.a.createElement(b.b,{exact:!0,path:"/create-account",render:function(){return da(s.a.createElement(de,null))}}),s.a.createElement(b.a,{to:"/"}))};a(155),a(156),a(157);w.a.initializeApp({apiKey:"AIzaSyCa61N2rKPLU-m7RW-iQ1Xd2G8d2GL0to8",authDomain:"lien-search-262720.firebaseapp.com",databaseURL:"https://lien-search-262720.firebaseio.com",projectId:"lien-search-262720",storageBucket:"lien-search-262720.appspot.com",messagingSenderId:"45974338820",appId:"1:45974338820:web:762f88d7c893541b0ce451"});var Ea=Object(g.a)(),ba=Object(v.a)({palette:{primary:{main:"#fff200"},secondary:{main:"#e32c2c"}},typography:{fontFamily:"Roboto",fontSize:12,subtitle1:{fontWeight:"bold"},h5:{fontWeight:600}},spacing:6,overrides:{MuiButton:{root:{height:40}},MuiDivider:{root:{backgroundColor:"black"}},MuiFormLabel:{focused:{borderColor:"black"},root:{"&$focused":{color:"black"}}},MuiTextField:{root:{"&.Mui-focused fieldset":{borderColor:"green"}}},MuiOutlinedInput:{root:{"&$focused":{borderColor:"black"}}}}}),ga=function(){var e=Object(o.useState)(null),t=Object(E.a)(e,2),a=t[0],n=t[1],r=Object(o.useState)(!0),c=Object(E.a)(r,2),i=c[0],l=c[1],u=w.a.firestore();return Object(o.useEffect)((function(){w.a.auth().onAuthStateChanged(function(){var e=Object(f.a)(p.a.mark((function e(t){var a,r,c,i,o,s,m,d,f,E;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=20;break}return e.prev=1,e.next=4,t.getIdTokenResult();case 4:return d=e.sent,e.next=7,u.collection("users").doc(t.uid).get();case 7:(f=e.sent).exists&&(E=f.data()),n({admin:null!==(a=d.claims.admin)&&void 0!==a&&a,orgId:null!==(r=null===(c=E)||void 0===c?void 0:c.orgId)&&void 0!==r?r:"",name:null!==(i=null===(o=E)||void 0===o?void 0:o.name)&&void 0!==i?i:"",phoneNumber:null!==(s=null===(m=E)||void 0===m?void 0:m.phoneNumber)&&void 0!==s?s:"",email:t.email||"",uid:t.uid||""}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0);case 15:return e.prev=15,l(!1),e.finish(15);case 18:e.next=22;break;case 20:n(null),l(!1);case 22:case"end":return e.stop()}}),e,null,[[1,12,15,18]])})));return function(t){return e.apply(this,arguments)}}())}),[u]),i?s.a.createElement(s.a.Fragment,null):s.a.createElement(h.a,{theme:ba},s.a.createElement(D.Provider,{value:a},s.a.createElement(b.c,{history:Ea},s.a.createElement(b.d,null,s.a.createElement(fa,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));m.a.render(s.a.createElement(ga,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.register("../firebase-messaging-sw.js").then((function(e){console.log("Registration successful, scope is:",e.scope)})).catch((function(e){console.log("Service worker registration failed, error:",e)})),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[134,1,2]]]);
//# sourceMappingURL=main.be94682d.chunk.js.map